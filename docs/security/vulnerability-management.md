# Quản lý Lỗ hổng Bảo mật

## Giới thiệu

Go cung cấp các công cụ và tài nguyên để giúp developers phát hiện và giải quyết các lỗ hổng bảo mật trong các phụ thuộc của dự án Go.

## Công cụ

### govulncheck

Công cụ chính thức để kiểm tra vulnerabilities:

```bash
# Cài đặt
go install golang.org/x/vuln/cmd/govulncheck@latest

# Kiểm tra project
govulncheck ./...

# Kiểm tra binary
govulncheck -mode=binary myapp
```

### Output Example

```
Vulnerability #1: GO-2023-1234
    Package: github.com/example/package
    Version: v1.2.3
    
    A vulnerability in package allows remote code execution.
    
    Fixed in: v1.2.4
    
    Call stacks in your code:
      main.go:42: main() calls example/package.VulnerableFunc()
```

### Tích hợp CI/CD

#### GitHub Actions

```yaml
name: Security Check
on: [push, pull_request]

jobs:
  vuln-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-go@v5
        with:
          go-version: '1.21'
      - name: Install govulncheck
        run: go install golang.org/x/vuln/cmd/govulncheck@latest
      - name: Run govulncheck
        run: govulncheck ./...
```

#### GitLab CI

```yaml
security-scan:
  image: golang:1.21
  script:
    - go install golang.org/x/vuln/cmd/govulncheck@latest
    - govulncheck ./...
```

## Cơ sở Dữ liệu Lỗ hổng

### Go Vulnerability Database

- URL: [vuln.go.dev](https://vuln.go.dev)
- API: [vuln.go.dev/index.json](https://vuln.go.dev/index.json)

### Cấu trúc Entry

```json
{
  "id": "GO-2023-1234",
  "aliases": ["CVE-2023-12345"],
  "modified": "2023-06-01T00:00:00Z",
  "affected": [
    {
      "package": {
        "name": "github.com/example/package",
        "ecosystem": "Go"
      },
      "ranges": [
        {
          "type": "SEMVER",
          "events": [
            {"introduced": "0"},
            {"fixed": "1.2.4"}
          ]
        }
      ]
    }
  ]
}
```

## Quy trình Xử lý

### 1. Phát hiện

```bash
govulncheck ./...
```

### 2. Đánh giá

Kiểm tra:
- Severity của vulnerability
- Code path có bị ảnh hưởng không?
- Có workaround không?

### 3. Sửa chữa

```bash
# Cập nhật dependency
go get github.com/example/package@v1.2.4
go mod tidy
```

### 4. Xác minh

```bash
govulncheck ./...
# Không còn vulnerabilities
```

## Best Practices

### Dependency Management

```bash
# Kiểm tra outdated dependencies
go list -u -m all

# Cập nhật tất cả
go get -u ./...
go mod tidy
```

### Regular Scanning

```bash
# Chạy hàng tuần hoặc trong CI/CD
govulncheck ./...
```

### Minimal Dependencies

```go
// Chỉ import những gì cần thiết
import (
    "encoding/json"
    // Không: "github.com/large-framework/everything"
)
```

### Version Pinning

```go
// go.mod
module example.com/myapp

go 1.21

require (
    github.com/example/package v1.2.4 // Pinned version
)
```

## Xử lý False Positives

### Khi code path không bị ảnh hưởng

govulncheck đã thông minh - chỉ báo cáo khi code thực sự gọi vulnerable function.

### Exclude patterns

Không có tính năng exclude chính thức, nhưng có thể:

```bash
# Ignore trong output
govulncheck ./... 2>&1 | grep -v "known-false-positive"
```

## Báo cáo Lỗ hổng Mới

### Trong Go hoặc Standard Library

Gửi email đến: security@golang.org

### Trong Third-party Packages

1. Liên hệ maintainer
2. Nếu không phản hồi, báo cáo tới [Go Vulnerability Database](https://go.dev/s/vulndb-report)

### Template báo cáo

```yaml
module: github.com/example/vulnerable-package
versions:
  - introduced: 1.0.0
  - fixed: 1.2.4
summary: Brief description
description: |
  Detailed description of the vulnerability,
  including impact and exploitation.
references:
  - https://github.com/example/vulnerable-package/issues/123
```

## Monitoring

### Subscribe to Advisories

- [Go Announce mailing list](https://groups.google.com/g/golang-announce)
- [GitHub Watch releases](https://github.com/golang/go/releases)

### Automated Alerts

Sử dụng Dependabot hoặc Snyk cho automated alerts:

```yaml
# .github/dependabot.yml
version: 2
updates:
  - package-ecosystem: "gomod"
    directory: "/"
    schedule:
      interval: "weekly"
```

---

*Xem thêm tại [go.dev/doc/security/vuln](https://go.dev/doc/security/vuln)*
